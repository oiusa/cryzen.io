import{_ as M,o,c as d,e as t,a8 as ne,i as J,j as Z,y as U,u as V,a0 as K,a as P,Q as oe,v as x,z as O,J as B,A as re,E as I,d as e,l as y,D as L,h,R as ce,t as _,F as D,f as le,g as ie,w as H,G as de,I as ue,S as pe,p as z,q as X,a9 as me,aa as Q,k as _e,X as ve,x as fe,b as he,a6 as W,a5 as ye,n as A,r as ge,K as we,B as be}from"./index-ltdjbB5e.js";import{_ as Y}from"./AnimatedNumber-DYF_PKQh.js";import{_ as ke}from"./LoadingElement-CjXzJGa6.js";import{_ as xe}from"./TwoXRewards-Dtv47A_p.js";import{_ as Se}from"./ThreeDText-SEYWHLIA.js";import{_ as Ne}from"./RewardCard-CtrkOSZ2.js";import{_ as ee}from"./AccentNotify-6kBLfhUc.js";const Le={},$e={class:"skew-button-wrapper"},Be={class:"skew-button"},Ie={class:"text"};function Me(u,l){return o(),d("div",$e,[t("div",Be,[t("div",Ie,[ne(u.$slots,"default",{},void 0,!0)])])])}const Ee=M(Le,[["render",Me],["__scopeId","data-v-20f2cd77"]]),j=u=>(z("data-v-e586c86a"),u=u(),X(),u),Ce={class:"game-end-rewards"},Re=j(()=>t("div",{class:"bg"},null,-1)),He={class:"content"},Ae={key:0,class:"reward-cont"},De={class:"bottom"},Ue={key:0,class:"btns"},Ve={class:"pick-up-text"},Te=j(()=>t("img",{src:me,class:"pick-up-img"},null,-1)),Ge={class:"level-cont"},Fe={class:"rank-wrapper"},Ze=["src"],Pe={class:"lvl-cont"},ze={class:"lvl phantom"},Xe={class:"lvl"},je={class:"lvl-label"},qe={class:"progress-cont"},Je={class:"exp-count"},Ke={key:0,class:"exp"},Oe={key:1,class:"dynamic-exp-count"},Qe={class:"exp"},We={key:2,class:"dynamic-exp-count"},Ye={class:"exp"},et={class:"exp-label"},tt={class:"bottom"},st=j(()=>t("div",{class:"bg-lvl"},null,-1)),at=ue('<svg class="bg-sec" viewBox="0 0 1920 768" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-e586c86a><path d="M1920 607V209H1664L1510.5 607H1920Z" fill="#4B4D7A" data-v-e586c86a></path><path d="M-1 607H207.5L379 209H-1V607Z" fill="#4B4D7A" data-v-e586c86a></path><path d="M299 607H1413L1560.5 209H459.5L299 607Z" fill="url(#paint0_radial_1918_2441)" fill-opacity="0.5" data-v-e586c86a></path><path class="path-1" d="M332 168H359.5L143 659H113L332 168Z" fill="#1EE3F7" data-v-e586c86a></path><path class="path-2" d="M296.473 50H344.5L-33.6065 907.507H-86L296.473 50Z" fill="#1EE3F7" fill-opacity="0.7" data-v-e586c86a></path><path class="path-3" d="M1729 153H1756L1569 644H1543L1729 153Z" fill="#1EE3F7" data-v-e586c86a></path><path class="path-4" d="M1850.5 0H1896L1570.39 857.507H1518L1850.5 0Z" fill="#1EE3F7" fill-opacity="0.7" data-v-e586c86a></path><defs data-v-e586c86a><radialGradient id="paint0_radial_1918_2441" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(959.5 408) rotate(90) scale(199 960.5)" data-v-e586c86a><stop stop-color="#8C8DAD" data-v-e586c86a></stop><stop offset="1" stop-color="#626382" data-v-e586c86a></stop></radialGradient></defs></svg>',1),nt=J({__name:"GameEndRewards",setup(u){const{t:l}=Z(),b=U(),a=V(),r=K(),g=P(),S=oe(),i=x(0),p=x(0),v=x(0),s=x(0),c=x(!1),k=x(0),w=x(0),f=x(0);O(async()=>{await a.getMe();const{user:m,userBeforeMatch:n}=a;if(!m)return B({type:"error",text:l("notifications.something-went-wrong")}),r.showRewards=!1,r.gameEndData=null,console.error("Game end reward - user not found");if(!n)return B({type:"error",text:l("notifications.something-went-wrong")}),r.showRewards=!1,r.gameEndData=null,console.error("Game end reward - userBeforeMatch not found");f.value=n.expUntilNextLvl,k.value=n.lvl;const T=[...m.achievements.backgrounds,...m.achievements.emblems],C=[...n.achievements.backgrounds,...n.achievements.emblems],G=T.filter(N=>!C.some(R=>R.id===N.id));i.value=1,G.forEach(N=>B({type:"achievement",text:l("notifications.new-achievement"),id:Number(N.id),duration:3e4})),p.value=n.expSinceLastLvl/(n.expUntilNextLvl/100),w.value=r.gameEndData?.rewards.exp??0,await $(1e3),v.value=(n.expSinceLastLvl+w.value)/(n.expUntilNextLvl/100),n.expUntilNextLvl<n.expSinceLastLvl+w.value&&(m.lvl>n.lvl&&B({type:"level-up",id:m.lvl,duration:3e4}),await $(1e3),k.value+=1,f.value=m.expUntilNextLvl,v.value=0,p.value=0,s.value=(n.expSinceLastLvl+w.value-n.expUntilNextLvl)/(m.expUntilNextLvl/100))});const $=m=>new Promise(n=>setTimeout(n,m)),E=async()=>{try{r.showRewards=!1,r.gameEndData=null,g.playInterfaceSoundByName("claimReward"),await a.getMe()}catch(m){B({type:"error",text:`setRewards: ${l("notifications.something-went-wrong")}`}),console.error("set rewards",m)}},se=async()=>{c.value=!0,await S.rewardCommercialVideoWrapper("reward","getIncrTerra")&&(await pe.get("/games/getIncrTerra"),E()),c.value=!1},q=m=>{m===2?(g.playInterfaceSoundByName("click"),r?.gameEndData?.rewards.terra?i.value=m:(r.showRewards=!1,r.gameEndData=null)):m===3&&E()};return re(()=>{r.showRewards=!1,r.gameEndData=null}),(m,n)=>{const T=Ne,C=Se,G=xe,N=ke,R=Y,ae=Ee;return o(),d("div",Ce,[Re,t("div",He,[t("div",{style:I({transform:`scale(${e(b).scaleInterfaceValue})`,"transform-origin":"bottom"}),class:"wrapper"},[e(i)===2?(o(),d("div",Ae,[y(T,{name:"terra",count:e(r)?.gameEndData?.rewards.terra??0},null,8,["count"]),t("div",De,[y(C,{class:"reward-text-title",text:e(l)("lobby.game-end-rewards.reward")},null,8,["text"]),e(c)?(o(),L(N,{key:1,class:"loading"})):(o(),d("div",Ue,[e(a).user&&e(a).user.adsLimit.afterGame.counter<e(a).user.adsLimit.afterGame.limit?(o(),L(G,{key:0,onClick:n[0]||(n[0]=F=>se()),class:"two-x-rewards"})):h("",!0),t("div",{onMouseenter:n[1]||(n[1]=F=>e(g).playInterfaceSoundByName("hover")),onClick:n[2]||(n[2]=ce(F=>(e(g).playInterfaceSoundByName("click"),q(3)),["stop"])),class:"pick-up-cont"},[t("span",Ve,_(e(l)("lobby.game-end-rewards.pick-up")),1),Te],32)]))])])):e(i)===1?(o(),d(D,{key:1},[t("div",Ge,[t("div",Fe,[t("img",{src:e(le)["interface/ranks/"+e(ie)(e(k)).img+".webp"],class:"rank"},null,8,Ze)]),t("div",Pe,[t("div",ze,_(e(a).user?.lvl??0),1),t("div",Xe,_(e(k)),1),t("div",je,_(e(l)("lobby.game-end-rewards.lvl")),1)]),t("div",qe,[e(p)>0?(o(),d("div",{key:0,style:I({"--percentage":e(p)+"%",width:e(p)+"%"}),class:"progress"},null,4)):h("",!0),e(v)>0?(o(),d("div",{key:1,style:I({"--percentage":e(v)+"%","--start":e(p)+"%",width:Math.min(e(v),100)+"%"}),class:"progress new"},null,4)):h("",!0),e(s)>0?(o(),d("div",{key:2,style:I({"--percentage":e(s)+"%",width:Math.min(e(s),100)+"%"}),class:"progress new"},null,4)):h("",!0)]),t("div",Je,[e(v)===0&&e(s)===0?(o(),d("div",Ke,_(e(a).userBeforeMatch.expSinceLastLvl)+" / "+_(e(f)),1)):h("",!0),e(v)>0?(o(),d("span",Oe,[y(R,{startNumber:e(a).userBeforeMatch.expSinceLastLvl,endNumber:e(a).userBeforeMatch.expSinceLastLvl+e(w),duration:1e3},null,8,["startNumber","endNumber"]),H(" "),t("span",Qe,_(`/ ${e(f)}`),1)])):h("",!0),e(s)>0?(o(),d("span",We,[y(R,{startNumber:0,endNumber:e(a).userBeforeMatch.expSinceLastLvl+e(w)-e(a).userBeforeMatch.expUntilNextLvl,duration:1e3},null,8,["endNumber"]),H(" "),t("span",Ye,_(`/ ${e(f)}`),1)])):h("",!0),t("div",et,_(e(l)("lobby.game-end-rewards.xp")),1)]),t("div",tt,[y(C,{text:e(l)("lobby.game-end-rewards.progress")},null,8,["text"]),y(ae,{onClick:n[3]||(n[3]=F=>q(2)),class:"pick-up"},{default:de(()=>[H(_(e(l)("lobby.game-end-rewards.next")),1)]),_:1})])]),st],64)):e(i)===0?(o(),L(N,{key:2,class:"loading"})):h("",!0)],4),at])])}}}),ot=M(nt,[["__scopeId","data-v-e586c86a"]]),te=u=>(z("data-v-ea2fcfc3"),u=u(),X(),u),rt={class:"currency-wrapper"},ct={class:"currency-cont"},lt=te(()=>t("img",{class:"currency-img",src:ve},null,-1)),it=te(()=>t("img",{class:"currency-img",src:fe},null,-1)),dt={class:"lvl"},ut={class:"lvl-label"},pt={__name:"SmallElements",setup(u){const{t:l}=Z(),b=Q(),a=P(),r=V(),g=U(),S=_e(()=>r.user?.balance||0),i=()=>{g.poki||(b.push({name:"store-currency"}),a.playInterfaceSoundByName("click"))},p=()=>{b.push({name:"level-system"}),a.playInterfaceSoundByName("click")};return(v,s)=>{const c=Y,k=ee;return o(),d("div",rt,[t("div",ct,[t("div",{onClick:i,onMouseenter:s[0]||(s[0]=w=>e(a).playInterfaceSoundByName("hover")),class:"currency currency-1"},[lt,y(c,{startNumber:0,endNumber:e(S).credit||0,duration:300},null,8,["endNumber"])],32),t("div",{onClick:i,onMouseenter:s[1]||(s[1]=w=>e(a).playInterfaceSoundByName("hover")),class:"currency currency-2"},[it,y(c,{startNumber:0,endNumber:e(S).terra||0,duration:300},null,8,["endNumber"])],32),t("div",{onClick:p,onMouseenter:s[2]||(s[2]=w=>e(a).playInterfaceSoundByName("hover")),class:"lvl-cont"},[t("div",dt,_(e(r).user?.lvl||1),1),t("div",ut,_(e(l)("lobby.header.lvl")),1),e(r).rewards.length?(o(),L(k,{key:0,class:"notify-circle"})):h("",!0)],32)])])}}},mt=M(pt,[["__scopeId","data-v-ea2fcfc3"]]),_t=["onClick"],vt={__name:"Navigation",setup(u){const{t:l}=Z(),b=he(),a=P(),r=V(),g=U(),S=Q(),i=W(),p=x([{name:"lobby.header.navs.play",active:!1,route:"play"},{name:"lobby.header.navs.inventory",active:!1,route:"inventory"},{name:"lobby.header.navs.store",active:!1,route:"store-menu"},{name:"lobby.header.navs.profile",active:!1,route:"profile"},{name:"lobby.header.navs.center",active:!1,route:"center-leaderboard"}]);p.value.map(s=>(i.name===s.route&&(s.active=!0),s)),ye(i,()=>{p.value.map(s=>(i.matched[3]&&i.matched[3].name===s.route||i.matched[2]?.name===s.route?s.active=!0:s.active=!1,s))}),O(()=>{p.value.forEach((s,c)=>{i.matched[3].name===s.route&&v(s,c)})});const v=(s,c)=>{if(s.route==="profile"){b.openModal("profile-modal");return}p.value.forEach(k=>k.active=!1),p.value[c]={...s,active:!0},S.push({name:s.route})};return(s,c)=>{const k=we,w=ee;return o(),d("div",{class:A(["navigation",{poki:e(g).poki}])},[e(i).name==="play"?(o(),d(D,{key:0},[t("div",{onClick:c[0]||(c[0]=f=>(e(b).openModal("settings-modal"),e(a).playInterfaceSoundByName("click"))),onMouseenter:c[1]||(c[1]=f=>e(a).playInterfaceSoundByName("hover")),class:A(["settings-cont",{"poki-settings":e(g).poki}])},[y(k,{name:"settings",class:"settings"})],34),e(r).user.lvl>4&&!e(r).user.socialLinked&&!e(g).poki?(o(),d("div",{key:0,onClick:c[2]||(c[2]=f=>(e(b).openModal("profile-modal"),e(a).playInterfaceSoundByName("click"))),class:"link-service"},_(e(l)("lobby.account.link-warning")),1)):h("",!0)],64)):h("",!0),(o(!0),d(D,null,ge(e(p),(f,$)=>(o(),d("div",{onClick:E=>(v(f,$),e(a).playInterfaceSoundByName("click")),onMouseenter:c[3]||(c[3]=E=>e(a).playInterfaceSoundByName("hover")),key:$,class:A(["nav-el",{active:f.active}])},[H(_(e(l)(f.name))+" ",1),f.route==="store"&&e(r).canTakeFreeCredits?(o(),L(w,{key:0,class:"exclamation"})):h("",!0)],42,_t))),128))],2)}}},ft=M(vt,[["__scopeId","data-v-095fc73a"]]),ht=u=>(z("data-v-5bcf0e77"),u=u(),X(),u),yt=ht(()=>t("div",{class:"bg-1"},null,-1)),gt=J({__name:"Header",setup(u){const l=U(),b=V(),a=K(),r=W();return(g,S)=>{const i=ft,p=mt,v=be("RouterView"),s=ot;return o(),d(D,null,[t("div",{class:"top",style:I({transform:`scale(${e(l).scaleInterfaceValue})`,"transform-origin":"top left"})},[y(i),y(p),t("div",{class:A([{"mini-bg":e(r).name!=="play"},"bg"])},null,2)],4),y(v),yt,e(a).showRewards&&e(b).user?(o(),L(s,{key:0})):h("",!0)],64)}}}),$t=M(gt,[["__scopeId","data-v-5bcf0e77"]]);export{$t as default};
